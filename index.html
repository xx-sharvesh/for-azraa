<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Magical Smile Unlocker ‚ú®</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg1: #fff7ff;
      --bg2: #e8fbff;
      --accent: #ff70a6;
      --accent2: #6ee7ff;
      --accent3: #ffd166;
      --ink: #2a2a2a;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Fredoka', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink);
      background: radial-gradient(1200px 600px at 20% 10%, var(--bg2), transparent),
                  radial-gradient(1200px 700px at 80% 0%, #fff1f5, transparent),
                  linear-gradient(120deg, #fdfcff, #f3fcff);
      overflow-x: hidden;
    }
    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .card {
      width: min(720px, 92vw);
      background: #ffffffcc;
      backdrop-filter: blur(6px);
      border-radius: 28px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.08), inset 0 0 0 1px rgba(255,255,255,0.6);
      padding: 28px 22px 22px;
      position: relative;
      overflow: hidden;
      border: 2px dashed #ffe0ec;
    }
    .title {
      display: flex; align-items: center; gap: 12px; justify-content: center;
      font-weight: 700; font-size: clamp(24px, 4vw, 36px);
      margin: 6px 0 10px;
    }
    .title .spark { filter: drop-shadow(0 4px 6px rgba(255, 191, 209, .8)); }
    .story { text-align: center; font-size: clamp(16px, 2.6vw, 20px); line-height: 1.5; margin: 4px 0 16px; }
    .story b { color: #ff5b9f; }

    .button {
      --shadow: 0 10px 18px rgba(255, 112, 166, .35);
      display: inline-flex; align-items: center; justify-content: center; gap: 10px;
      margin: 8px auto 16px; width: 100%; max-width: 360px; height: 64px;
      border-radius: 18px; border: none; cursor: pointer;
      font-size: 20px; font-weight: 700; letter-spacing: .2px;
      background: linear-gradient(180deg, #ff9fbd, #ff70a6);
      color: #fff; box-shadow: var(--shadow);
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
    }
    .button:hover { transform: translateY(-1px); filter: brightness(1.02); box-shadow: 0 14px 26px rgba(255,112,166,.45); }
    .button:active { transform: translateY(1px) scale(.99); }

    .meter {
      width: 100%; max-width: 520px; height: 14px; margin: 0 auto 8px;
      background: #fff; border-radius: 999px; overflow: hidden;
      box-shadow: inset 0 0 0 2px #ffe3ee;
      position: relative;
    }
    .meter > span {
      display: block; height: 100%; width: 0%; border-radius: 999px;
      background: linear-gradient(90deg, #a7f3d0, #6ee7ff, #ffd166, #ff70a6);
      background-size: 200% 100%;
      box-shadow: 0 6px 14px rgba(255,112,166,.25);
      animation: hue 3s linear infinite;
    }
    @keyframes hue { from { background-position: 0 0; } to { background-position: -200% 0; } }

    .meter-label { text-align: center; font-size: 14px; opacity: .8; margin-bottom: 8px; }
    .celebrate { text-align: center; font-size: clamp(16px, 2.6vw, 22px); margin: 8px 0 2px; display: none; }

    .floating { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 10; }
    .bubble, .balloon, .sparkle { position: absolute; will-change: transform, opacity; }

    .footer-note { text-align: center; font-size: 13px; opacity: .7; margin-top: 8px; }

    /* Cute mascot */
    .mascot {
      width: 132px; height: 132px; margin: 10px auto 2px; position: relative;
      filter: drop-shadow(0 10px 14px rgba(255, 112, 166, .2));
      animation: floaty 3s ease-in-out infinite;
    }
    @keyframes floaty { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-10px) } }
    .face { width: 100%; height: 100%; background: #fff; border-radius: 28px; border: 3px solid #ffd6e7; display: grid; place-items: center; }
    .eyes { display: flex; gap: 16px; }
    .eye { width: 16px; height: 16px; background: #333; border-radius: 50%; animation: blink 5s infinite; }
    @keyframes blink { 0%, 2%, 60%, 62%, 100% { transform: scaleY(1) } 1%, 61% { transform: scaleY(.1) } }
    .smile { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); width: 64px; height: 28px; border-bottom: 6px solid #ff7bb4; border-radius: 0 0 60px 60px; }

    .tagline { text-align: center; font-size: 15px; margin-top: 4px; opacity: .9; }

    /* Pop game */
    .game { display:none; margin-top: 8px; }
    .game-info { text-align:center; font-size: 14px; opacity:.85; }
    .play-area { position: relative; height: 180px; margin-top: 8px; border-radius: 18px; background: linear-gradient(180deg, #fefaff, #f0fbff); overflow: hidden; box-shadow: inset 0 0 0 2px #ffe3ee; }
    .pop { position: absolute; font-size: 28px; cursor: pointer; user-select: none; }

    .badge { display:none; text-align:center; margin-top: 8px; }
    .badge .pill { display:inline-block; padding:10px 14px; border-radius:999px; background: #fff; box-shadow: 0 6px 14px rgba(0,0,0,.06), inset 0 0 0 2px #ffe3ee; font-weight:700; }

    /* Mobile tweaks */
    @media (max-width: 420px){ .story { font-size: 16px } }
  </style>
</head>
<body>
  <div class="floating" id="floatingLayer" aria-hidden="true"></div>
  <div class="wrap">
    <main class="card" role="dialog" aria-live="polite" aria-label="Magical Smile Unlocker">
      <div class="title"><span class="spark">‚ú®</span> Magical Smile Unlocker <span class="spark">üåà</span></div>

      <div class="mascot" aria-hidden="true">
        <div class="face">
          <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
          <div class="smile"></div>
        </div>
      </div>

      <p class="story">
        Oh no‚Ä¶ the <b>sparkle lights</b> are sleepy today because a very special hero isn‚Äôt smiling yet.<br>
        Can you guess who the hero is? <b>It‚Äôs YOU!</b> Your smile has <b>real magic</b> inside it ‚Äî
        it can wake up rainbows, balloons, and giggles! Shall we try your magic now?
      </p>

      <div class="meter" aria-label="Smile Meter" title="Smile Meter"><span id="meterFill"></span></div>
      <div class="meter-label" id="meterLabel">Smile power: 0%</div>

      <button class="button" id="smileBtn" aria-label="I am smiling now">
        I‚Äôm smiling now üòÑ
      </button>

      <p class="celebrate" id="celebrateText">YAAAY! You unlocked the magic! üåü Balloons incoming‚Ä¶</p>

      <section class="game" id="game">
        <div class="game-info">Pop <b>5 balloons</b> to send extra giggles to the clouds üéà</div>
        <div class="play-area" id="playArea" aria-label="Balloon pop play area"></div>
      </section>

      <div class="badge" id="badge">
        <div class="pill">Official Smile Hero ‚≠êÔ∏è</div>
        <div class="tagline">The world is brighter because of <b>your</b> smile.</div>
      </div>

      <p class="footer-note">Tip: You can tap the button again if the sparkles want an encore ‚ú®</p>
    </main>
  </div>

  <script>
    const btn = document.getElementById('smileBtn');
    const meterFill = document.getElementById('meterFill');
    const meterLabel = document.getElementById('meterLabel');
    const floating = document.getElementById('floatingLayer');
    const celebrateText = document.getElementById('celebrateText');
    const game = document.getElementById('game');
    const playArea = document.getElementById('playArea');
    const badge = document.getElementById('badge');

    let popping = 0;

    function animateMeter(to = 100, duration = 900){
      const start = parseFloat(meterFill.style.width) || 0;
      const startTime = performance.now();
      function tick(now){
        const p = Math.min(1, (now - startTime)/duration);
        const val = start + (to - start) * p;
        meterFill.style.width = val.toFixed(2) + '%';
        meterLabel.textContent = `Smile power: ${Math.round(val)}%`;
        if(p < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function confettiBurst(count = 120){
      for(let i=0;i<count;i++){
        const piece = document.createElement('div');
        piece.className = 'sparkle';
        const size = rand(6,12);
        piece.style.width = size+'px';
        piece.style.height = size+'px';
        piece.style.left = rand(0, 100)+'%';
        piece.style.top = rand(10, 40)+'%';
        piece.style.background = `hsl(${Math.floor(rand(0,360))} 90% 65%)`;
        piece.style.borderRadius = rand(0,1) > .5 ? '2px' : '50%';
        piece.style.opacity = 1;
        const dx = rand(-60, 60);
        const dy = rand(40, 140);
        const rot = rand(-180, 180);
        piece.animate([
          { transform: 'translate(0,0) rotate(0deg)', opacity: 1 },
          { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity: 0 }
        ], { duration: rand(1200, 2200), easing: 'cubic-bezier(.2,.8,.2,1)' });
        floating.appendChild(piece);
        setTimeout(() => piece.remove(), 2300);
      }
    }

    function launchBalloons(count = 12){
      for(let i=0;i<count;i++){
        const b = document.createElement('div');
        b.className = 'balloon';
        b.textContent = ['üéà','üéà','üéà','üéà','üéà','üéà','üéà','üéà','üéà','üéà','üéà','üéà'][i%12];
        const size = rand(26, 42);
        b.style.fontSize = size+'px';
        b.style.left = rand(0, 100)+'%';
        b.style.bottom = '-40px';
        const rise = rand(60, 100);
        const drift = rand(-40, 40);
        const time = rand(4000, 6500);
        b.animate([
          { transform: 'translate(0,0)', opacity: .9 },
          { transform: `translate(${drift}px, -${rise}vh)`, opacity: 0.95 }
        ], { duration: time, easing: 'cubic-bezier(.3,.7,.2,1)' });
        floating.appendChild(b);
        setTimeout(() => b.remove(), time + 50);
      }
    }

    function sparkleRain(count = 60){
      for(let i=0;i<count;i++){
        const s = document.createElement('div');
        s.className = 'bubble';
        s.textContent = ['‚ú®','‚≠ê','üåü','üíñ','ü´ß'][Math.floor(rand(0,5))];
        s.style.left = rand(0, 100)+'%';
        s.style.top = rand(-10, -2)+'%';
        const drift = rand(-40, 40);
        const drop = rand(60, 90);
        const time = rand(3500, 5200);
        s.style.fontSize = rand(18, 28)+'px';
        s.animate([
          { transform: 'translate(0,0)', opacity: .9 },
          { transform: `translate(${drift}px, ${drop}vh)`, opacity: .2 }
        ], { duration: time, easing: 'linear' });
        floating.appendChild(s);
        setTimeout(() => s.remove(), time + 50);
      }
    }

    function startMiniGame(){
      game.style.display = 'block';
      playArea.innerHTML = '';
      popping = 0;
      spawnPop();
      spawnPop();
      spawnPop();
    }

    function spawnPop(){
      const p = document.createElement('div');
      p.className = 'pop';
      p.textContent = 'üéà';
      const x = rand(10, 85);
      const y = rand(10, 75);
      p.style.left = x+'%';
      p.style.top = y+'%';
      const bob = p.animate([
        { transform: 'translateY(0)' },
        { transform: 'translateY(-10px)' },
        { transform: 'translateY(0)' }
      ], { duration: 1600, iterations: Infinity, easing: 'ease-in-out' });

      p.addEventListener('click', () => {
        bob.cancel();
        p.textContent = 'üí•';
        p.style.transform = 'scale(1.2)';
        setTimeout(()=> p.remove(), 250);
        popping++;
        confettiBurst(22);
        if(popping >= 5){
          badge.style.display = 'block';
          celebrateText.textContent = 'Level up! Extra giggles delivered! ü§©';
          setTimeout(()=>{ badge.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 150);
        } else {
          setTimeout(spawnPop, 400);
        }
      })

      playArea.appendChild(p);
    }

    function celebrate(){
      animateMeter(100);
      celebrateText.style.display = 'block';
      confettiBurst(160);
      launchBalloons(14);
      sparkleRain(50);
      startMiniGame();
      localStorage.setItem('smileHero', 'true');
    }

    btn.addEventListener('click', celebrate);

    // If she‚Äôs already a hero, greet her again with a gentle effect
    if(localStorage.getItem('smileHero') === 'true'){
      animateMeter(40, 600);
      setTimeout(()=>{ sparkleRain(30); }, 500);
    }
  </script>
</body>
</html>